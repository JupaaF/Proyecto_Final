{# Plantilla Jinja2 para el archivo 'fvSolution' de OpenFOAM #}

{% if params.solver_selected == 'damBreak' %}

    solvers
        {
            "alpha.water.*"
            {
                nAlphaCorr      2;
                nAlphaSubCycles 1;
                cAlpha          1;

                MULESCorr       yes;
                nLimiterIter    5;

                solver          smoothSolver;
                smoother        symGaussSeidel;
                tolerance       {{ params.alpha_water_tolerance }};
                relTol          {{ params.alpha_water_relTol }};
            }

            "pcorr.*"
            {
                solver          PCG;
                preconditioner  DIC;
                tolerance       1e-5;
                relTol          0;
            }

            p_rgh
            {
                solver          PCG;
                preconditioner  DIC;
                tolerance       {{ params.p_rgh_tolerance }};
                relTol          {{ params.p_rgh_relTol }};
            }

            p_rghFinal
            {
                $p_rgh;
                relTol          0;
            }

            U
            {
                solver          smoothSolver;
                smoother        symGaussSeidel;
                tolerance       {{ params.U_tolerance }};
                relTol          {{ params.U_relTol }};
            }
        }

        PIMPLE
        {
            momentumPredictor   no;
            nOuterCorrectors    {{ params.nOuterCorrectors }};
            nCorrectors         {{ params.nCorrectors }};
            nNonOrthogonalCorrectors {{ params.nNonOrthogonalCorrectors }};
        }

        relaxationFactors
        {
            equations
            {
                ".*" 1;
            }
        }
{% endif %}