{# Plantilla Jinja2 para el archivo 'k' de OpenFOAM #}
dimensions      [{{uDim[0]}} {{uDim[1]}} {{uDim[2]}} {{uDim[3]}} {{uDim[4]}} {{uDim[5]}} {{uDim[6]}}];

{%if internalField.option_selected == "customPatch"%}
internalField    {{internalField.customPatchContent}};
{%else%}
internalField     uniform  {{internalField.value}};
{%endif%}

boundaryField
{
    {# Itera sobre la lista de condiciones de borde pasadas desde Python #}
    {% for patch in boundaryField %}
    {{ patch.patchName }}
    {
        {%if patch.type == "customPatch"%}
        {{patch.customPatchContent}}
        {%else%}
        type            {{ patch.type }};
        {% if patch.type == "groovyBC" %}
        refValue        uniform 0;
        value           uniform 1e-10;
        refGradient     uniform 0;
        valueFraction   uniform 1;
        valueExpression "inletprofilek(pos().z)";
        gradientExpression "0";
        fractionExpression "1";
        evaluateDuringConstruction 1;
        variables       "";
        timelines       (
);
        lookuptables    (
{
        name            inletprofilek;
        file        "$FOAM_CASE/1d_profil/k.b.xy";
        outOfBounds     clamp;
}
        {% endif %}
        {# Itera sobre todos los par√°metros del patch y los escribe #}
        {% for key, value in patch.items() %}
        {% if key not in ['patchName', 'type'] %}
        {% if value is mapping %}
        {{ key }}           uniform ({{ value.x }} {{ value.y }} {{ value.z }});
        {% else %}
        {{ key }}           uniform {{ value }};
        {% endif %}
        {% endif %}
        {% endfor %}
        {%endif%}
    }
    {% endfor %}

}

{%if customContent is not none%}
{{customContent}}
{%endif%}